{"version":3,"sources":["style.js","App.js","index.js"],"names":["Wrapper","styled","div","LeftWrapper","RightWrapper","StrokeShow","StrokeNameList","CharacterWrapper","FunctionWrapper","HistoryWrapper","Character","ButtonWrapper","TitleTextSpan","span","TitleTextSpan2","ContextRegularSpan","ImageContainer","TitleWrapper","DataSetTitle","TextRegular","text","App","canvasRef","useRef","useState","currentStroke","setCurrentStroke","currentChar","setCurrentChar","strokeList","setStrokeList","strokeIndex","setStrokeIndex","strokeCompleted","setStrokeCompleted","systemInfo","setSystemInfo","result","setResult","tempPoints","addPoints","currentAuthor","setCurrentAuthor","sysInfoLoading","setSysInfoLoading","currentCharLoading","setCurrentCharLoading","strokeListLoading","setStrokeListLoading","submitLoading","setSubmitLoading","submitSuccess","setSubmitSuccess","useEffect","a","axios","reqResult","data","canvasClear","currentImageId","author","c_id","strokesData","strokes","find","stroke","id","current","getContext","clearRect","nextStroke","message","warning","length","strokeOrderLength","thisStroke","name","record","reStartChar","submitChar","skip","ans","dataSetId","charId","charName","post","useHotkeys","style","fontSize","margin","tip","description","type","Group","value","size","buttonStyle","map","item","Button","onClick","height","width","padding","border","borderRadius","borderTop","title","percent","steps","showInfo","bordered","Item","label","src","strokeOrderImageUrl","placeholder","prefix","UserOutlined","onChange","e","target","status","total","alt","left","position","fileName","ref","error","canvas","getBoundingClientRect","top","x","clientX","y","clientY","ctx","lineWidth","beginPath","arc","Math","PI","strokeStyle","fillStyle","Paint","disabled","danger","borderBottom","overflow","index","display","flexDirection","alignItems","item2","index2","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.82a2ea6c.chunk.js","sourcesContent":["import styled from 'styled-components';\r\n\r\nexport const Wrapper = styled.div`\r\n  margin: 50px auto;\r\n  width: 1500px;\r\n  height: 800px;\r\n  border: 2px solid black;\r\n  border-radius: 20px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  align-items: center;\r\n  canvas {\r\n    width: 256px;\r\n    height: 256px;\r\n    border: 2px solid black;\r\n  }\r\n`;\r\n\r\n// 左侧\r\nexport const LeftWrapper = styled.div`\r\n  width: 750px;\r\n  height: 750px;\r\n  border-right: 2px solid gray;\r\n  padding-right: 5px;\r\n  /* border-radius: 20px; */\r\n  display: flex;\r\n  flex-direction: column;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n`;\r\n\r\n// 右侧大的组件\r\nexport const RightWrapper = styled.div`\r\n  margin-left: auto;\r\n  width: 800px;\r\n  height: 750px;\r\n  /* border: 2px solid black; */\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  flex-wrap: wrap;\r\n`;\r\n\r\nexport const StrokeShow = styled.div`\r\n  /* border: 1px solid red; */\r\n  /* border-top: 1px solid #C0C0C0; */\r\n  /* height: 630px; */\r\n  margin-bottom: 27px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n  align-items: center;\r\n  .text {\r\n    font-size : 25px;\r\n  }\r\n`;\r\n\r\nexport const StrokeNameList = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  margin-top: 10px;\r\n  border-bottom: #C0C0C0;\r\n  width: 650px;\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  border-bottom: 1px solid white;\r\n`;\r\n\r\nexport const CharacterWrapper = styled.div`\r\n  width: 650px;\r\n  height: 600px;\r\n  border: 1px solid black;\r\n  border-radius: 10px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: center;\r\n`;\r\n\r\nexport const FunctionWrapper = styled.div`\r\n  width: 300px;\r\n  /* border: 1px solid blue; */\r\n`;\r\n\r\nexport const HistoryWrapper = styled.div`\r\n  margin: 20px;\r\n  width: 250px;\r\n  border: 1px solid gray;\r\n  border-radius: 5px;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nexport const Character = styled.div`\r\n  width: 300px;\r\n  height: 300px;\r\n  border: 1px solid gray;\r\n  border-radius: 5px;\r\n  position: relative;\r\n  canvas {\r\n    width: 256px;\r\n    height: 256px;\r\n    margin: 22px;\r\n    border: 0;\r\n  }\r\n  img {\r\n    width: 256px;\r\n    height: 256px;\r\n    border: 1px solid red;\r\n    margin: 22px;\r\n    z-index: -1;\r\n  }\r\n`;\r\n\r\n\r\nexport const ButtonWrapper = styled.div`\r\n  margin-top: 20px;\r\n  width: 256px;\r\n  display: flex;\r\n  flex-direction: row;\r\n  flex-wrap: wrap;\r\n  justify-content: center;\r\n  align-items: center;\r\n  Button {\r\n    margin: 5px;\r\n  }\r\n`;\r\n\r\nexport const StrokePicture = styled.div`\r\n  width: 45px;\r\n  height: 45px;\r\n  border: 2px solid #1890ff;\r\n  img {\r\n    margin: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  \r\n`;\r\n\r\nexport const CurrentStrokeWrapper = styled.div`\r\n  margin: 20px;\r\n`;\r\n\r\nexport const TitleTextSpan = styled.span`\r\n  font-size: 22px;\r\n`;\r\n\r\n\r\nexport const TitleTextSpan2 = styled.span`\r\n  font-size: 20px;\r\n`;\r\n\r\nexport const ContextRegularSpan = styled.span`\r\n  font-size: 18px;\r\n  font-weight: normal;\r\n`;\r\n\r\n\r\nexport const ImageContainer = styled.div`\r\n  width: 140px;\r\n  height: auto;\r\n  border: 1px solid #1890FF;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n`;\r\n\r\nexport const TitleWrapper = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  flex-wrap: wrap;\r\n  align-items: center;\r\n`;\r\n\r\nexport const DataSetTitle = styled.div`\r\n  margin-top: 20px;\r\n  height: auto;\r\n  width: 648px;\r\n`;\r\n\r\n// 是否已经标注\r\n// 撤销笔画\r\n// 跳转到哪一个字（记录个人标注的进度）+ 30/111","import React, { useState, useEffect, useRef } from 'react';\nimport axios from 'axios';\nimport { useHotkeys } from 'react-hotkeys-hook';\nimport './App.css';\n\nimport strokesData from './config/strokes-detail.json';\n\nimport {\n  Wrapper,\n  RightWrapper,\n  StrokeShow,\n  LeftWrapper,\n  CharacterWrapper,\n  FunctionWrapper,\n  HistoryWrapper,\n  Character,\n  ButtonWrapper,\n  StrokeNameList,\n  TitleTextSpan,\n  ContextRegularSpan,\n  ImageContainer,\n  TitleWrapper,\n  DataSetTitle,\n  TitleTextSpan2\n} from './style';\n\nimport { Button, Radio, Progress, Image, Descriptions, Badge, message, Input, Spin, Alert } from 'antd';\n\nimport { UserOutlined } from '@ant-design/icons';\n\nconst TextRegular = (text) => {\n  return (\n    <ContextRegularSpan>{text}</ContextRegularSpan>\n  )\n}\n\nconst App = () => {\n  // useRef Hooks\n  const canvasRef = useRef(null);\n  \n  // useState Hooks\n  const [ currentStroke, setCurrentStroke ] = useState({});\n  const [ currentChar, setCurrentChar ] = useState({});\n  const [ strokeList, setStrokeList ] = useState({});\n  const [ strokeIndex, setStrokeIndex ] = useState(1); // 现在是第几个笔画\n  const [ strokeCompleted,  setStrokeCompleted] = useState(false); // 记录是否完成当前字\n  const [ systemInfo, setSystemInfo ] = useState({});\n  const [ result, setResult ] = useState([]);\n  const [ tempPoints, addPoints ] = useState([]);\n  const [ currentAuthor, setCurrentAuthor ] = useState([]);\n\n  // Loading\n  const [ sysInfoLoading, setSysInfoLoading ] = useState(true);\n  const [ currentCharLoading, setCurrentCharLoading ] = useState(true);\n  const [ strokeListLoading, setStrokeListLoading ] = useState(true);\n  const [ submitLoading, setSubmitLoading ] = useState(false);\n  const [ submitSuccess, setSubmitSuccess ] = useState(false);\n\n  // useEffect Hooks\n    // init char\n  useEffect(() => {\n    (async () => {\n      setSysInfoLoading(() => true);\n      const reqResult = await axios('http://localhost:4000/api/system-info');\n      setSystemInfo(() => reqResult.data);\n      setSysInfoLoading(() => false);\n    })();\n    canvasClear(); // 顺便清空一下canvas\n  }, [ submitSuccess ]);\n    // 重新获取字的信息和笔画的信息\n  useEffect(() => {\n    if (sysInfoLoading) return;\n    (async () => {\n      setCurrentCharLoading(() => true);\n      const reqResult = await axios('http://localhost:4000/api/character-info?id=' + systemInfo.currentImageId);\n      setCurrentChar(() => reqResult.data);\n      setCurrentCharLoading(() => false);\n      setSubmitSuccess(() => false);\n      setStrokeIndex(() => 1);\n      setStrokeCompleted(() => false);\n      setResult(() => []);\n      setCurrentAuthor(() => systemInfo.author);\n    })();\n  }, [ sysInfoLoading, systemInfo ]);\n    // 如果获取了字的信息，那么更新笔画的信息\n  useEffect(() => {\n    if (currentCharLoading) return;\n    (async () => {\n      setStrokeListLoading(() => true);\n      const reqResult = await axios('http://localhost:4000/api/strokes-list?id=' + currentChar.c_id);\n      setStrokeList(() => reqResult.data);\n      setStrokeListLoading(() => false);\n    })();\n  }, [ currentCharLoading, currentChar ]);\n    // 笔画列表动了，那笔画进度肯定要清零。\n  useEffect(() => {\n    setStrokeIndex(() => 1);\n  }, [ strokeList ]);\n    // 笔画进度一旦修改，那么当前笔画一定要更新，缓存数据要清零\n  useEffect(() => {\n    if (strokeListLoading) return;\n    setCurrentStroke(() => strokesData.strokes.find(stroke => stroke.id === strokeList[strokeIndex-1]));\n    addPoints(() => []);\n  }, [ strokeListLoading, strokeIndex, strokeList ]);\n\n  const Paint = (e) => { // 每次点击canvas\n    if (tempPoints.length + 1 > currentStroke.strokeOrderLength) {\n      message.error('关键点数量溢出，请检查数量');\n      return;\n    }\n    const canvas = canvasRef.current;\n    const { left, top } = canvas.getBoundingClientRect();\n    const x = e.clientX - left, y = e.clientY - top;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.lineWidth = 4;\n    ctx.beginPath();\n    ctx.arc(x, y, 5, 0, 2*Math.PI);\n    ctx.strokeStyle = \"magenta\";\n    ctx.fillStyle = \"magenta\";\n    ctx.stroke();\n    addPoints(() => {\n      return [...tempPoints, [x, y]];\n    });\n  }\n\n  const canvasClear = () => {\n    const canvas = canvasRef.current;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.clearRect(0, 0, 256, 256);\n    addPoints(() => []);\n  };\n\n  const nextStroke = () => {\n    if (strokeCompleted) {\n      message.warning(\"已经录入完成所有笔画，请进入下一个字\");\n      return;\n    }\n    if (tempPoints.length !== currentStroke.strokeOrderLength) {\n      message.warning(\"关键点录入未完成\");\n      return;\n    }\n    const thisStroke = {\n      id: currentStroke.id,\n      name: currentStroke.name,\n      record: tempPoints\n    }\n    canvasClear();\n    setResult(() => [...result, thisStroke]);\n    if (strokeIndex < strokeList.length) {\n      setStrokeIndex(strokeIndex => strokeIndex + 1);\n    } else {\n      setStrokeCompleted(true);\n    }\n  };\n\n  const reStartChar = () => {\n    canvasClear();\n    setResult(() => []);\n    setStrokeCompleted(() => false);\n    setStrokeIndex(() => 1);\n  };\n\n  const submitChar = (skip) => {\n    if (!strokeCompleted && !skip) {\n      message.warning(\"笔画数量未达到预设标准\");\n      return;\n    }\n    setSubmitLoading(true);\n    (async () => {\n      const ans = {\n        dataSetId: systemInfo.dataSetId,\n        currentImageId: systemInfo.currentImageId,\n        author: currentAuthor,\n        charId: currentChar.id,\n        skip,\n        charName: currentChar.name,\n        result\n      }\n      const reqResult = await axios.post('http://localhost:4000/api/submit', ans);\n      (reqResult.data === \"success\") && setSubmitSuccess(() => true);\n      setSubmitLoading(false);\n    })();\n  };\n\n  useHotkeys('c', () => nextStroke(), {}, [ strokeCompleted, tempPoints, currentStroke, result, strokeList, strokeIndex ]);\n  useHotkeys('z', () => canvasClear());\n  useHotkeys('x', () => reStartChar());\n  useHotkeys('h', () => submitChar(true), {}, [ strokeCompleted, systemInfo, currentChar, currentAuthor ]);\n  useHotkeys('v', () => submitChar(false), {}, [ strokeCompleted, systemInfo, currentChar, currentAuthor ]);\n  \n\n  return (\n    <Wrapper>\n      <LeftWrapper>\n        <StrokeNameList>\n          <span style={{ fontSize: \"25px\", margin: \"10px\" }}>笔画列表（自动选择）</span>\n          {\n            strokeListLoading ? (\n              <Spin tip=\"Loading...\">\n                <Alert\n                  message=\"strokeList\"\n                  description=\"strokeList strokeList strokeList strokeList strokeList strokeList \"\n                  type=\"info\"\n                />\n              </Spin>\n            ) : (\n              <Radio.Group \n                style={{margin: \"17px\" }}\n                value={strokeList[strokeIndex-1]} size=\"large\" buttonStyle=\"solid\">\n                {\n                  strokesData.strokes.map((item) => {\n                    return (\n                      <Radio.Button key={`stroke_${item.id}`} value={item.id} \n                        onClick={() => message.warning(\"目前不允许修改笔顺，请修改配置文件适配\")}\n                      >\n                        { item.name }\n                      </Radio.Button>\n                    )\n                  })\n                }\n              </Radio.Group>\n            )\n          }\n        </StrokeNameList>\n        <StrokeShow>\n          { \n            currentCharLoading ? (\n              <Spin tip=\"Loading...\">\n                <Alert\n                  message=\"currentChar\"\n                  description=\"currentChar currentChar currentChar currentChar currentChar currentChar\"\n                  type=\"info\"\n                />\n              </Spin>\n            ) : (\n              <Descriptions \n                style={{ height: \"auto\", width: \"650px\", padding: \"20px\", \n                  border: \"1px solid black\",\n                  borderRadius: \"10px\",\n                  borderTop: \"1px solid white\"}}\n                title={\n                  <TitleWrapper>\n                    <TitleTextSpan>当前笔画信息：{`${currentStroke.id} - ${currentStroke.name}`} </TitleTextSpan>\n                    <div>\n                      {TextRegular(`关键点标记进度[${tempPoints.length}/${currentStroke.strokeOrderLength}]: `)}\n                      <Progress percent={(tempPoints.length/currentStroke.strokeOrderLength)*100} steps={currentStroke.strokeOrderLength} showInfo={false}/>\n                    </div>\n                  </TitleWrapper>\n                } \n                bordered\n              >\n                <Descriptions.Item label={TextRegular('笔画示意图')}>\n                  <ImageContainer>\n                    <Image src={`/assets/stroke-example/${currentStroke.strokeOrderImageUrl}`} />\n                  </ImageContainer>\n                </Descriptions.Item>\n                <Descriptions.Item label={TextRegular('节点分布图')} span={2}>\n                  <ImageContainer>\n                    <Image src={`/assets/stroke-order/${currentStroke.strokeOrderImageUrl}`} />\n                  </ImageContainer>\n                </Descriptions.Item>\n              </Descriptions>\n            )\n          } \n        </StrokeShow >\n      </LeftWrapper>\n      <RightWrapper>\n            {\n              sysInfoLoading && currentCharLoading ? (\n              <Spin tip=\"Loading...\">\n                <Alert\n                  message=\"sysInfo, currentChar\"\n                  description=\" \"\n                  type=\"info\"\n                />\n              </Spin>\n              ) : (\n                <DataSetTitle>\n                  <TitleWrapper>\n                    <TitleTextSpan>\n                      数据集：{systemInfo.dataSetId}号\n                    </TitleTextSpan>\n                    <Input \n                      style={{ width: '40%' }} \n                      size=\"large\" \n                      placeholder=\"记录人\" \n                      prefix={<UserOutlined />} \n                      value={currentAuthor} \n                      onChange={e => setCurrentAuthor(() => e.target.value)}\n                    />\n                  </TitleWrapper>\n                  <TitleTextSpan2><Badge status=\"processing\" />当前字：\"{currentChar.name}\"，进度：{systemInfo.currentImageId}/{systemInfo.total}</TitleTextSpan2>\n                </DataSetTitle>\n              )\n            }\n        <CharacterWrapper>\n          <FunctionWrapper>\n            <span>请在红框内进行标记</span>\n            <Character>\n              {\n                sysInfoLoading ? (\n                <Spin tip=\"Loading...\">\n                  <Alert\n                    message=\"sysInfo\"\n                    description=\"sysInfo sysInfo sysInfo sysInfo \"\n                    type=\"info\"\n                  />\n                </Spin>\n                ) : (\n                  <img \n                    alt=\"\"\n                    style={{\n                      left: \"0px\",\n                      position: \"absolute\"\n                    }}\n                    src={`http://localhost:4000/${systemInfo.dataSetId}/${currentChar.fileName}`}\n                  >\n                  </img>\n                )\n              }\n\n              <canvas\n                width=\"256px\"\n                height=\"256px\"\n                ref={canvasRef}\n                onClick={e => Paint(e)}\n              >\n              </canvas>\n            </Character>\n            <ButtonWrapper>\n              <Button \n                size=\"large\" \n                type=\"primary\" \n                onClick={() => nextStroke()}\n                disabled={tempPoints.length !== currentStroke.strokeOrderLength}\n              >下一个笔画（C）</Button>\n              <Button size=\"large\" onClick={canvasClear}> 清空该笔画关键点（Z）</Button>\n              <Button size=\"large\" danger onClick={reStartChar}>重新开始本字（X）</Button>\n              <Button size=\"large\" type=\"dashed\" danger onClick={() => submitChar(true)}>本字难以辨认，跳过（H）</Button>\n            </ButtonWrapper>\n          </FunctionWrapper>\n          <HistoryWrapper>\n            <ContextRegularSpan\n              style={{\n                margin: 10,\n                borderBottom: '2px solid black'\n              }}\n            >\n              输出结果<br></br>\n            </ContextRegularSpan>\n            <div style={{ overflow: \"scroll\", height: \"340px\", width: \"100%\"}}>\n            { \n              strokeListLoading ? (\n                <Spin tip=\"strokeList\">\n                </Spin>\n              ) : (\n                  result.map((item, index) => {\n                    return (\n                        <div key={index} style={{ fontSize: \"18px\", display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}> \n                          <span>\n                            ({index + 1}) {item.name}\n                          </span>\n                          <span\n                            style={{\n                              margin: 5,\n                              borderBottom: '1px solid gray'\n                            }}\n                          >\n                            <div \n                            >\n                              {\n                                item.record.map((item2, index2) => {\n                                  return (\n                                    <span key={index2}> ({item2[0]}, {item2[1]})</span>\n                                  )\n                                })\n                              }\n                            </div>\n                          </span>\n                        </div>\n                    )\n                  })\n              )\n            }\n            </div>\n            <div>\n              <Progress style={{margin: \"10px\"}} type=\"circle\" status={ submitSuccess ? null : \"active\"} percent={\n                strokeCompleted ? 100 : (((strokeIndex-1)/strokeList.length)*100)\n              } width={80} />\n              { submitLoading ? (<Spin />) : null }\n            </div>\n            <Button \n              size=\"large\" type=\"primary\" \n              onClick={() => submitChar(false)} \n              disabled={!strokeCompleted}\n            >\n              提交本字（V）\n            </Button>\n          </HistoryWrapper>\n        </CharacterWrapper>\n      </RightWrapper>\n    </Wrapper>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}